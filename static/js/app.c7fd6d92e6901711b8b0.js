webpackJsonp([1],{"2bfX":function(e,n){},"2mKR":function(e,n){},NHnr:function(e,n,i){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var a=i("7+uW"),t={render:function(){var e=this.$createElement,n=this._self._c||e;return n("div",{staticClass:"container",attrs:{id:"app"}},[n("router-view")],1)},staticRenderFns:[]};var s=i("VU/8")({name:"App"},t,!1,function(e){i("nQMc")},null,null).exports,o=i("/ocq"),c=i("Dd8w"),l=i.n(c),r={name:"DrumKit",props:{isActive:{type:Boolean,default:!0}},data:function(){return{sounds:[{key:"A",code:65,playing:!1,name:"clap",file:"./static/sounds/drums/clap.wav"},{key:"S",code:83,playing:!1,name:"hihat",file:"./static/sounds/drums/hihat.wav"},{key:"D",code:68,playing:!1,name:"kick",file:"./static/sounds/drums/kick.wav"},{key:"F",code:70,playing:!1,name:"openhat",file:"./static/sounds/drums/openhat.wav"},{key:"G",code:71,playing:!1,name:"boom",file:"./static/sounds/drums/boom.wav"},{key:"H",code:72,playing:!1,name:"ride",file:"./static/sounds/drums/ride.wav"},{key:"J",code:74,playing:!1,name:"snare",file:"./static/sounds/drums/snare.wav"},{key:"K",code:75,playing:!1,name:"tom",file:"./static/sounds/drums/tom.wav"},{key:"L",code:76,playing:!1,name:"tink",file:"./static/sounds/drums/tink.wav"}]}},methods:{playSound:function(e,n){if(e&&this.isActive){var i=n?n.code:e.keyCode,a=(this.$refs[i]||[])[0];this.$refs.drum.querySelector('div[data-key="'+i+'"]');if(!a)return;(n=n||this.sounds.find(function(e){return e.code==i}))&&(n.playing=!0),a.currentTime=0,a.play(),this.$parent&&this.$parent.$emit("key:play",l()({instrument:"drumkit"},n))}},playSoundWithoutEvent:function(e){var n=(this.$refs[e]||[])[0];if(n){var i=this.sounds.find(function(n){return n.code==e});i&&(i.playing=!0),n.currentTime=0,n.play()}}},mounted:function(){var e=this;document.addEventListener("keydown",this.playSound.bind(this)),this.$parent&&this.$parent.$on("ws:key:play",function(n){"drumkit"==n.instrument&&e.playSoundWithoutEvent(n.code)}),this.sounds.forEach(function(n){var i=(e.$refs[n.code]||[])[0];i&&(i.onended=function(e){n.playing=!1})})}},d={render:function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],ref:"drum",staticClass:"keys"},[e._l(e.sounds,function(n){return i("div",{directives:[{name:"ga",rawName:"v-ga",value:e.$ga.commands.trackClick.bind(e.$ga,"drumkit",n.name),expression:"$ga.commands.trackClick.bind($ga, 'drumkit', sound.name)"}],key:"sound"+n.key,staticClass:"key",class:{playing:n.playing},attrs:{"data-key":n.code},on:{mousedown:function(i){e.playSound(i,n)}}},[i("kbd",[e._v(e._s(n.key))]),e._v(" "),i("span",{staticClass:"sound"},[e._v(e._s(n.name))])])}),e._v(" "),e._l(e.sounds,function(e){return i("audio",{key:e.key,ref:e.code,refInFor:!0,attrs:{src:e.file}})})],2)},staticRenderFns:[]};var y=i("VU/8")(r,d,!1,function(e){i("gdub")},"data-v-1df5e225",null).exports;function u(){return"./static/sounds/piano/"+this.key+".mp3"}var p={props:{isActive:{type:Boolean,default:!0}},data:function(){return{activeOctave:1,blackKeyIndices:[2,4,7,9,11,14,16,19,21,23],sounds:[[{key:"Bb2",code:"8",playing:!1,file:u},{key:"A2",code:"u",playing:!1,file:u,sharp:"Bb2"},{key:"Ab2",code:"7",playing:!1,file:u},{key:"G2",code:"y",playing:!1,file:u,sharp:"Ab2"},{key:"Gb2",code:"6",playing:!1,file:u},{key:"F2",code:"t",playing:!1,file:u,sharp:"Gb2"},{key:"E2",code:"r",playing:!1,file:u},{key:"Eb2",code:"4",playing:!1,file:u},{key:"D2",code:"e",playing:!1,file:u,sharp:"Eb2"},{key:"Db2",code:"3",playing:!1,file:u},{key:"C2",code:"w",playing:!1,file:u,sharp:"Db2"},{key:"B1",code:"q",playing:!1,file:u},{key:"Bb1",code:"k",playing:!1,file:u},{key:"A1",code:"m",playing:!1,file:u,sharp:"Bb1"},{key:"Ab1",code:"j",playing:!1,file:u},{key:"G1",code:"n",playing:!1,file:u,sharp:"Ab1"},{key:"Gb1",code:"h",playing:!1,file:u},{key:"F1",code:"b",playing:!1,file:u,sharp:"Gb1"},{key:"E1",code:"v",playing:!1,file:u},{key:"Eb1",code:"f",playing:!1,file:u},{key:"D1",code:"c",playing:!1,file:u,sharp:"Eb1"},{key:"Db1",code:"d",playing:!1,file:u},{key:"C1",code:"x",playing:!1,file:u,sharp:"Db1"},{key:"B0",code:"z",playing:!1,file:u}],[{key:"Bb4",code:"8",playing:!1,file:u},{key:"A4",code:"u",playing:!1,file:u,sharp:"Bb4"},{key:"Ab4",code:"7",playing:!1,file:u},{key:"G4",code:"y",playing:!1,file:u,sharp:"Ab4"},{key:"Gb4",code:"6",playing:!1,file:u},{key:"F4",code:"t",playing:!1,file:u,sharp:"Gb4"},{key:"E4",code:"r",playing:!1,file:u},{key:"Eb4",code:"4",playing:!1,file:u},{key:"D4",code:"e",playing:!1,file:u,sharp:"Eb4"},{key:"Db4",code:"3",playing:!1,file:u},{key:"C4",code:"w",playing:!1,file:u,sharp:"Db4"},{key:"B3",code:"q",playing:!1,file:u},{key:"Bb3",code:"k",playing:!1,file:u},{key:"A3",code:"m",playing:!1,file:u,sharp:"Bb3"},{key:"Ab3",code:"j",playing:!1,file:u},{key:"G3",code:"n",playing:!1,file:u,sharp:"Ab3"},{key:"Gb3",code:"h",playing:!1,file:u},{key:"F3",code:"b",playing:!1,file:u,sharp:"Gb3"},{key:"E3",code:"v",playing:!1,file:u},{key:"Eb3",code:"f",playing:!1,file:u},{key:"D3",code:"c",playing:!1,file:u,sharp:"Eb3"},{key:"Db3",code:"d",playing:!1,file:u},{key:"C3",code:"x",playing:!1,file:u,sharp:"Db3"},{key:"B2",code:"z",playing:!1,file:u}],[{key:"Bb6",code:"8",playing:!1,file:u},{key:"A6",code:"u",playing:!1,file:u,sharp:"Bb6"},{key:"Ab6",code:"7",playing:!1,file:u},{key:"G6",code:"y",playing:!1,file:u,sharp:"Ab6"},{key:"Gb6",code:"6",playing:!1,file:u},{key:"F6",code:"t",playing:!1,file:u,sharp:"Gb6"},{key:"E6",code:"r",playing:!1,file:u},{key:"Eb6",code:"4",playing:!1,file:u},{key:"D6",code:"e",playing:!1,file:u,sharp:"Eb6"},{key:"Db6",code:"3",playing:!1,file:u},{key:"C6",code:"w",playing:!1,file:u,sharp:"Db6"},{key:"B5",code:"q",playing:!1,file:u},{key:"Bb5",code:"k",playing:!1,file:u},{key:"A5",code:"m",playing:!1,file:u,sharp:"Bb5"},{key:"Ab5",code:"j",playing:!1,file:u},{key:"G5",code:"n",playing:!1,file:u,sharp:"Ab5"},{key:"Gb5",code:"h",playing:!1,file:u},{key:"F5",code:"b",playing:!1,file:u,sharp:"Gb5"},{key:"E5",code:"v",playing:!1,file:u},{key:"Eb5",code:"f",playing:!1,file:u},{key:"D5",code:"c",playing:!1,file:u,sharp:"Eb5"},{key:"Db5",code:"d",playing:!1,file:u},{key:"C5",code:"x",playing:!1,file:u,sharp:"Db5"},{key:"B4",code:"z",playing:!1,file:u}],[{key:"Bb7",code:"8",playing:!1,file:u},{key:"A7",code:"u",playing:!1,file:u,sharp:"Bb7"},{key:"Ab7",code:"7",playing:!1,file:u},{key:"G7",code:"y",playing:!1,file:u,sharp:"Ab7"},{key:"Gb7",code:"6",playing:!1,file:u},{key:"F7",code:"t",playing:!1,file:u,sharp:"Gb7"},{key:"E7",code:"r",playing:!1,file:u},{key:"Eb7",code:"4",playing:!1,file:u},{key:"D7",code:"e",playing:!1,file:u,sharp:"Eb7"},{key:"Db7",code:"3",playing:!1,file:u},{key:"C8",code:"w",playing:!1,file:u,sharp:"Db7"},{key:"B7",code:"q",playing:!1,file:u},{key:"Bb7",code:"k",playing:!1,file:u},{key:"A7",code:"m",playing:!1,file:u,sharp:"Bb7"},{key:"Ab7",code:"j",playing:!1,file:u},{key:"G7",code:"n",playing:!1,file:u,sharp:"Ab7"},{key:"Gb7",code:"h",playing:!1,file:u},{key:"F7",code:"b",playing:!1,file:u,sharp:"Gb7"},{key:"E7",code:"v",playing:!1,file:u},{key:"Eb7",code:"f",playing:!1,file:u},{key:"D7",code:"c",playing:!1,file:u,sharp:"Eb7"},{key:"Db7",code:"d",playing:!1,file:u},{key:"C7",code:"x",playing:!1,file:u,sharp:"Db7"},{key:"B6",code:"z",playing:!1,file:u}]]}},computed:{keySounds:function(){return this.sounds.reduce(function(e,n){return e.concat(n)},[]).reduce(function(e,n){return e[n.key]=n,e},{})},blackKeys:function(){return this.blackKeyIndices.reduce(function(e,n){return e[n]=n,e},{})}},methods:{isMouseDown:function(e,n){e.buttons&&n()},playSound:function(e,n){if(e&&this.isActive){var i=n?n.code:e.key,a=this.sounds[this.activeOctave];n=n||a.find(function(e){return e.code==i});var t=(this.$refs[(n||{}).key]||[])[0];if(!t)return;n&&(n.playing=!0),t.currentTime=0,t.play(),this.$parent&&this.$parent.$emit("key:play",{instrument:"piano",code:n.key})}},playSoundWithoutEvent:function(e){var n=this.keySounds[e];if(n){var i=(this.$refs[n.key]||[])[0];i&&(n.playing=!0,i.currentTime=0,i.play())}},playBlackKey:function(e,n,i){return this.playSound(e,n[i+1])},handleKey:function(e){if(e)switch(e.key){case"ArrowRight":this.activeOctave=Math.min(this.activeOctave+1,3);break;case"ArrowLeft":this.activeOctave=Math.max(this.activeOctave-1,0);break;default:this.playSound(e)}}},mounted:function(){var e=this;document.addEventListener("keydown",this.handleKey.bind(this)),this.$parent&&this.$parent.$on("ws:key:play",function(n){"piano"==n.instrument&&e.playSoundWithoutEvent(n.code)}),this.sounds.reduce(function(e,n){return e.concat(n)},[]).forEach(function(n){var i=(e.$refs[n.key]||[])[0];i&&(i.onplay=function(e){setTimeout(function(){n.playing=!1},300)},i.onended=function(){n.playing=!1})})}},f={render:function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{directives:[{name:"show",rawName:"v-show",value:e.isActive,expression:"isActive"}],attrs:{id:"p-wrapper"}},[i("ul",e._l(e.sounds,function(n,a){return i("li",{key:a,staticClass:"octave",class:"octave-"+(a+3)+" "+(a==e.activeOctave&&"active")},[i("ul",{staticClass:"piano"},e._l(n,function(n,a){return i("li",{key:a},[n.key.length<3?i("div",{directives:[{name:"ga",rawName:"v-ga",value:e.$ga.commands.trackClick.bind(e.$ga,"piano",n.key),expression:"$ga.commands.trackClick.bind($ga, 'piano', sound.key)"}],staticClass:"anchor",class:{active:n.playing},on:{mouseover:function(i){e.isMouseDown(i,function(){return e.playSound(i,n)})},mousedown:function(i){e.playSound(i,n)}}},[e._v("\n            "+e._s(n.key.toUpperCase())+"\n          ")]):e._e(),e._v(" "),n.sharp?i("span",{directives:[{name:"ga",rawName:"v-ga",value:e.$ga.commands.trackClick.bind(e.$ga,"piano",e.keySounds[n.sharp].key),expression:"$ga.commands.trackClick.bind($ga, 'piano', keySounds[sound.sharp].key)"}],class:{active:e.keySounds[n.sharp].playing},on:{mouseover:function(i){e.isMouseDown(i,function(){return e.playSound(i,e.keySounds[n.sharp])})},mousedown:function(i){e.playSound(i,e.keySounds[n.sharp])}}},[e._v("\n            "+e._s(e.keySounds[n.sharp].key)+"\n          ")]):e._e()])}))])})),e._v(" "),e._l(e.sounds,function(n,a){return i("div",{key:a},e._l(n,function(e,n){return i("audio",{key:n,ref:e.key,refInFor:!0,attrs:{src:e.file()}})}))})],2)},staticRenderFns:[]};var k=i("VU/8")(p,f,!1,function(e){i("dKOV")},null,null).exports,h=i("mvHQ"),m=i.n(h),v=i("pFYg"),g=i.n(v),b={props:{},computed:{},data:function(){return{ws:null}},components:{},methods:{connect:function(){var e=this;return this.ws=new WebSocket("wss://live-band-server-vanisdbxzb.now.sh"),this.ws.onerror=function(e){return console.error("ws:"+ws.key,e)},this.ws.onopen=function(){console.log("WebSocket connection opened")},this.ws.onclose=function(){console.error("WebSocket connection closed"),setTimeout(e.connect,2e3)},this.ws.onmessage=function(n){try{n.data&&e.$emit("ws:key:play",JSON.parse(n.data))}catch(e){}},this.ws},send:function(e){this.ws&&this.ws.readyState==WebSocket.OPEN?"object"==(void 0===e?"undefined":g()(e))?this.ws.send(m()(e)):this.ws.send(e):console.error("ws:send","could not send message",e)}},mounted:function(){var e=this;this.connect(),this.$on("key:play",function(n){e.send(m()({instrument:n.instrument,code:n.code}))})}},w={render:function(){var e=this.$createElement;return(this._self._c||e)("div",[this._t("default")],2)},staticRenderFns:[]};var _=i("VU/8")(b,w,!1,function(e){i("2mKR")},null,null).exports,A={name:"BottomMenu",props:{clickHandler:{type:Function,default:function(){return{}}},inactiveItems:{type:Array,default:[]},active:{type:String}},data:function(){return{}},methods:{},mounted:function(){}},$={render:function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",{staticClass:"menu"},[i("div",{staticClass:"menu-item",class:{active:"drumkit"==e.active},on:{click:function(n){e.clickHandler("drumkit")}}},[i("kbd",[e._v("Drums")]),e._v(" "),i("span",{staticClass:"sound"},[e._v("Drums")])]),e._v(" "),i("div",{staticClass:"menu-item",class:{active:"piano"==e.active},on:{click:function(n){e.clickHandler("piano")}}},[i("kbd",[e._v("Piano")]),e._v(" "),i("span",{staticClass:"sound"},[e._v("Piano")])])])},staticRenderFns:[]};var E={components:{WsRelay:_,DrumKit:y,Piano:k,BottomMenu:i("VU/8")(A,$,!1,function(e){i("2bfX")},"data-v-7c6e1ba8",null).exports},data:function(){return{instruments:["drumkit","piano"],activeInstrument:0}},methods:{switchView:function(e){"jam"==e||(this.$ga.screenview(e),this.activeInstrument=this.instruments.findIndex(function(n){return n==e})||0)}},mounted:function(){this.$ga.screenview("drumkit")}},D={render:function(){var e=this,n=e.$createElement,i=e._self._c||n;return i("div",[i("WsRelay",[[i("DrumKit",{attrs:{"is-active":0===e.activeInstrument}}),e._v(" "),i("Piano",{attrs:{"is-active":1===e.activeInstrument}})]],2),e._v(" "),i("BottomMenu",{attrs:{"inactive-items":[e.instruments[e.activeInstrument]],active:e.instruments[e.activeInstrument],"click-handler":e.switchView}})],1)},staticRenderFns:[]};var S=i("VU/8")(E,D,!1,function(e){i("xojT")},null,null).exports;a.a.use(o.a);var B=new o.a({routes:[{path:"/",name:"home",component:S}]}),C=i("AYPi"),G=i.n(C);a.a.use(G.a,{id:"UA-127749764-1",commands:{trackClick:function(e,n){this.event(e,"click","name",n)}}}),a.a.config.productionTip=!1,new a.a({el:"#app",router:B,components:{App:s},template:"<App/>"})},dKOV:function(e,n){},gdub:function(e,n){},nQMc:function(e,n){},xojT:function(e,n){}},["NHnr"]);
//# sourceMappingURL=app.c7fd6d92e6901711b8b0.js.map